<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞</title>
</head>
<body>

<!-- –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ -->
<form method="post" th:action="@{/online-market/products/{productId}/edit(productId=${product.id})}">
    <label>
        –ù–∞–∑–≤–∞–Ω–∏–µ:<br>
        <input type="text" name="title" th:value="${product?.title}">
    </label><br>
    <label>
        –û–ø–∏—Å–∞–Ω–∏–µ:<br>
        <textarea name="details" th:text="${product?.details}"></textarea>
    </label><br>
    <label>
        –¶–µ–Ω–∞:<br>
        <input type="number" name="price" step="0.01" th:value="${product?.price}" required>
    </label><br>
    <button type="submit">–ò–∑–º–µ–Ω–∏—Ç—å</button>
</form>

<!-- –§–æ—Ä–º–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ -->
<form method="post" th:action="@{/online-market/products/{productId}/delete(productId=${product.id})}">
    <button type="submit">–£–¥–∞–ª–∏—Ç—å</button>
</form>

<!-- –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ -->
<form method="post" enctype="multipart/form-data"
      th:action="@{/online-market/products-media/upload/media/{productId}(productId=${product.id})}">
    <label>
        –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–µ–¥–∏–∞:<br>
        <input type="file" name="media" accept="image/*,video/*" required>
    </label><br>
    <button type="submit">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
</form>

<!-- ‚úÖ –ë–õ–û–ö: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∫–∏–¥–∫–∏ -->
<div>
    <h2>–î–æ–±–∞–≤–∏—Ç—å —Å–∫–∏–¥–∫—É:</h2>
    <form method="post" th:action="@{/online-market/products/discount/{productId}(productId=${product.id})}">
        <label>
            –°–∫–∏–¥–∫–∞ (% –æ—Ç 1 –¥–æ 100):<br>
            <input type="number" step="1" min="1" max="100" name="amount" required>
        </label><br>
        <label>
            –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å–∫–∏–¥–∫–∏:<br>
            <input type="datetime-local" name="endDiscount" required>
        </label><br>
        <button type="submit">–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å–∫–∏–¥–∫—É</button>
    </form>
</div>

<!-- ‚ùå –ë–õ–û–ö: –£–¥–∞–ª–µ–Ω–∏–µ —Å–∫–∏–¥–∫–∏ -->
<div th:if="${product.discount != null}">
    <h3>–¢–µ–∫—É—â–∞—è —Å–∫–∏–¥–∫–∞:
        <span th:text="${product.discount.amount + '%'}"></span><br>
        –î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ:
        <span th:text="${#temporals.format(product.discount.endDate, 'dd.MM.yyyy HH:mm')}"></span>
    </h3>
    <form method="post" th:action="@{/online-market/discount/products/delete/{productId}(productId=${product.id})}">
        <button type="submit" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Å–∫–∏–¥–∫—É?')">–£–¥–∞–ª–∏—Ç—å —Å–∫–∏–¥–∫—É</button>
    </form>
</div>

<!-- üì∑ –ú–µ–¥–∏–∞ -->
<div>
    <h2>–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Ç–æ–≤–∞—Ä–∞:</h2>
    <div th:each="media : ${product.getProductMedia()}">
        <img th:src="@{${media.getMediaPath()}}" alt="Product Image" width="150">
        <form method="post"
              th:action="@{/online-market/products-media/delete/media/{productId}/{mediaId}(productId=${product.getId()}, mediaId=${media.getId()})}">
            <button type="submit" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ?')">–£–¥–∞–ª–∏—Ç—å</button>
        </form>
    </div>
</div>

<!-- –û—à–∏–±–∫–∏ -->
<div th:if="${errors}">
    <h2>–î–æ–ø—É—â–µ–Ω—ã –æ—à–∏–±–∫–∏</h2>
    <ul>
        <li th:each="error: ${errors}" th:text="${error}"></li>
    </ul>
</div>

</body>
</html>